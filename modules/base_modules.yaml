# ğŸ”§ Base Modules - AI Orchestra ê¸°ë³¸ ëª¨ë“ˆ 10ê°œ

modules:
  # 1. ê¸°ì¡´ ê¸°ëŠ¥ ê²€ìƒ‰
  - id: "feature_scan"
    name: "ê¸°ëŠ¥ ê²€ìƒ‰"
    type: "discovery"
    description: "ê¸°ì¡´ ê¸°ëŠ¥/ë„êµ¬ ê²€ìƒ‰"
    script: "scripts/feature_scan.py"
    inputs:
      - name: "keyword"
        type: "string"
        required: true
    outputs:
      - name: "features"
        type: "list"
    example: |
      module run feature_scan --keyword "dashboard"
      > Found: tycoon_dashboard.py, approval_dashboard.py

  # 2. GitHub ì´ìŠˆ ìƒì„±
  - id: "create_issue"
    name: "ì´ìŠˆ ìƒì„±"
    type: "planning"
    description: "GitHub ì´ìŠˆ ìë™ ìƒì„±"
    command: "gh issue create"
    inputs:
      - name: "title"
        type: "string"
        required: true
      - name: "body"
        type: "string"
        required: true
      - name: "labels"
        type: "list"
        required: false
    outputs:
      - name: "issue_number"
        type: "integer"
      - name: "url"
        type: "string"

  # 3. AI íŒ€ì› í• ë‹¹
  - id: "assign_team"
    name: "íŒ€ í• ë‹¹"
    type: "planning"
    description: "ì‘ì—…ì„ AI íŒ€ì›ì—ê²Œ í• ë‹¹"
    script: "scripts/assign_team.py"
    inputs:
      - name: "task"
        type: "string"
        required: true
      - name: "members"
        type: "list"
        default: ["Emma", "Rajiv", "Anna"]
    outputs:
      - name: "assignments"
        type: "dict"
    integration: "persona_engine.py"

  # 4. Thomas ìŠ¹ì¸ ìš”ì²­
  - id: "request_review"
    name: "ìŠ¹ì¸ ìš”ì²­"
    type: "approval"
    description: "Thomas ë¦¬ë·° ë° ìŠ¹ì¸ ìš”ì²­"
    command: "gh pr review --approve"
    inputs:
      - name: "pr_number"
        type: "integer"
        required: true
      - name: "message"
        type: "string"
        default: "Thomasë‹˜, ê²€í†  ë¶€íƒë“œë¦½ë‹ˆë‹¤"
    outputs:
      - name: "approved"
        type: "boolean"
      - name: "feedback"
        type: "string"

  # 5. ì½”ë“œ ìƒì„±
  - id: "code_generation"
    name: "ì½”ë“œ ì‘ì„±"
    type: "implementation"
    description: "ì½”ë“œ ìë™ ìƒì„±"
    script: "scripts/code_gen.py"
    inputs:
      - name: "spec"
        type: "string"
        required: true
      - name: "language"
        type: "string"
        default: "python"
    outputs:
      - name: "file_path"
        type: "string"
      - name: "lines_of_code"
        type: "integer"

  # 6. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
  - id: "test_execution"
    name: "í…ŒìŠ¤íŠ¸"
    type: "validation"
    description: "ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰"
    command: "pytest"
    inputs:
      - name: "test_path"
        type: "string"
        default: "tests/"
      - name: "coverage"
        type: "boolean"
        default: true
    outputs:
      - name: "passed"
        type: "integer"
      - name: "failed"
        type: "integer"
      - name: "coverage_percent"
        type: "float"

  # 7. PR ë³‘í•©
  - id: "merge_pr"
    name: "PR ë³‘í•©"
    type: "integration"
    description: "Pull Request ìë™ ë³‘í•©"
    command: "gh pr merge"
    inputs:
      - name: "pr_number"
        type: "integer"
        required: true
      - name: "method"
        type: "string"
        default: "squash"
    outputs:
      - name: "merged"
        type: "boolean"
      - name: "commit_sha"
        type: "string"

  # 8. ë°°í¬
  - id: "deploy"
    name: "ë°°í¬"
    type: "deployment"
    description: "í”„ë¡œë•ì…˜ ë°°í¬"
    script: "scripts/deploy.py"
    inputs:
      - name: "environment"
        type: "string"
        default: "production"
      - name: "version"
        type: "string"
        required: true
    outputs:
      - name: "deployed"
        type: "boolean"
      - name: "url"
        type: "string"

  # 9. ë³´ê³ ì„œ ì „ì†¡
  - id: "send_report"
    name: "ë³´ê³ ì„œ"
    type: "communication"
    description: "ì¼ì¼/ì£¼ê°„ ë³´ê³ ì„œ ìƒì„± ë° ì „ì†¡"
    script: "scripts/send_report.py"
    inputs:
      - name: "type"
        type: "string"
        enum: ["daily", "weekly", "monthly"]
      - name: "recipients"
        type: "list"
        default: ["Thomas"]
    outputs:
      - name: "sent"
        type: "boolean"
      - name: "report_path"
        type: "string"
    integration: "persona_comments.py"

  # 10. ë¡¤ë°±
  - id: "rollback"
    name: "ë¡¤ë°±"
    type: "recovery"
    description: "ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°±"
    command: "git revert"
    inputs:
      - name: "commit_sha"
        type: "string"
        required: true
      - name: "reason"
        type: "string"
        required: true
    outputs:
      - name: "rolled_back"
        type: "boolean"
      - name: "new_commit"
        type: "string"

# ëª¨ë“ˆ ì¡°í•© ì˜ˆì‹œ
workflows:
  new_feature:
    description: "ìƒˆ ê¸°ëŠ¥ ê°œë°œ ì›Œí¬í”Œë¡œìš°"
    steps:
      - module: "feature_scan"
      - module: "create_issue"
      - module: "assign_team"
      - module: "code_generation"
      - module: "test_execution"
      - module: "request_review"
      - module: "merge_pr"
      - module: "deploy"
      - module: "send_report"

  hotfix:
    description: "ê¸´ê¸‰ ìˆ˜ì •"
    steps:
      - module: "code_generation"
      - module: "test_execution"
      - module: "deploy"
      - module: "send_report"

  rollback_emergency:
    description: "ê¸´ê¸‰ ë¡¤ë°±"
    steps:
      - module: "rollback"
      - module: "send_report"